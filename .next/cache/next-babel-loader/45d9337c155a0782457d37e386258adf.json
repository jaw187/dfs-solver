{"ast":null,"code":"import _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nvar _jsxFileName = \"/Users/jwesto1/Code/jaw187/dfs-solver/components/lineups.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Card from './card';\nimport { useSelector, useDispatch, shallowEqual } from \"react-redux\";\nimport Solver from \"../solver/index\";\nimport OwnershipWatcher from '../solver/ownership';\nconst {\n  solve,\n  Models,\n  players\n} = Solver;\n\nconst getState = () => {\n  const dispatch = useDispatch();\n  const slates = useSelector(state => state.slates, shallowEqual);\n  const selectedSlate = useSelector(state => state.selectedSlate);\n  const projection = useSelector(state => state.projection);\n  const results = useSelector(state => state.results);\n  const view = useSelector(state => state.view);\n\n  const removeLineup = i => {\n    dispatch({\n      type: 'REMOVE_RESULT',\n      payload: i\n    });\n  };\n\n  return {\n    slates,\n    selectedSlate,\n    projection,\n    results,\n    view,\n    removeLineup\n  };\n};\n\nconst Lineups = () => {\n  const {\n    slates,\n    selectedSlate,\n    projection,\n    results,\n    view,\n    removeLineup\n  } = getState();\n\n  if (view !== 'results') {\n    return null;\n  }\n\n  if (results.length === 0) {\n    return __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, \"Generate some lineups\");\n  }\n\n  const slate = slates && slates[selectedSlate];\n  const sport = slate.Sport.toLowerCase();\n  const site = 'draftkings';\n  const type = slate.GameType.Name.toLowerCase();\n\n  const formatPlayer = lineupPlayer => {\n    const player = slate.players.find(player => player.draftableId == lineupPlayer.id);\n\n    if (!player) {\n      return lineupPlayer.id;\n    }\n\n    return `${player.position} - ${player.displayName} - $${player.salary}`;\n  };\n\n  const headers = {\n    nfl: {\n      draftkings: {\n        classic: \"QB,RB,RB,WR,WR,WR,TE,FLEX,DST\\n\"\n      }\n    },\n    golf: {\n      draftkings: {\n        classic: \"G,G,G,G,G,G\\n\"\n      }\n    }\n  };\n  const exporters = {\n    nfl: {\n      draftkings: {\n        classic: result => {\n          const {\n            lineup: {\n              qb,\n              rbs,\n              wrs,\n              te,\n              flex,\n              dst\n            }\n          } = result;\n          return `${qb.id},${rbs[0].id},${rbs[1].id},${wrs[0].id},${wrs[1].id},${wrs[2].id},${te.id},${flex.id},${dst.id}`;\n        }\n      }\n    },\n    golf: {\n      draftkings: {\n        classic: result => {\n          const {\n            lineup: {\n              g\n            }\n          } = result;\n          return `${g[0].id},${g[1].id},${g[2].id},${g[3].id},${g[4].id},${g[5].id}`;\n        }\n      }\n    }\n  };\n\n  const exportToCSV = () => {\n    const header = headers[sport][site][type];\n    const csv = \"data:text/csv;charset=utf-8,\" + header + results.map(exporters[sport][site][type]).join('\\n');\n    const {\n      encodeURI,\n      open\n    } = window;\n    open(encodeURI(csv));\n  };\n\n  const remove = i => {\n    return () => removeLineup(i);\n  };\n\n  const containerStyle = {\n    display: 'flex',\n    flexDirection: 'row',\n    flexWrap: 'wrap'\n  };\n  const lineupStyle = {\n    padding: 16,\n    margin: 8,\n    backgroundColor: \"#f3f3f3\",\n    border: '1px solid #DDD',\n    fontSize: 12\n  };\n  const cardContainer = {\n    display: 'flex',\n    flexDirection: 'row'\n  };\n  const componentContainer = {\n    padding: 16\n  };\n  const playerCounts = {};\n  results.forEach(result => {\n    result.players.forEach(player => {\n      if (!playerCounts[player]) {\n        playerCounts[player] = 0;\n      }\n\n      ++playerCounts[player];\n    });\n  });\n\n  const ownership = _Object$keys(playerCounts).map(player => {\n    return {\n      player: formatPlayer({\n        id: player\n      }),\n      count: playerCounts[player],\n      percentage: (playerCounts[player] / results.length * 100).toFixed(0)\n    };\n  });\n\n  const ownershipPlayerStyle = {\n    whiteSpace: 'nowrap'\n  };\n  const lineupFormats = {\n    nfl: {\n      draftkings: {\n        classic: (result, i) => __jsx(\"div\", {\n          key: i,\n          style: lineupStyle,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }, __jsx(\"button\", {\n          onClick: remove(i),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160\n          },\n          __self: this\n        }, \"Remove\"), __jsx(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }, formatPlayer(result.lineup.qb)), __jsx(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162\n          },\n          __self: this\n        }, formatPlayer(result.lineup.rbs[0])), __jsx(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163\n          },\n          __self: this\n        }, formatPlayer(result.lineup.rbs[1])), __jsx(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164\n          },\n          __self: this\n        }, formatPlayer(result.lineup.wrs[0])), __jsx(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165\n          },\n          __self: this\n        }, formatPlayer(result.lineup.wrs[1])), __jsx(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166\n          },\n          __self: this\n        }, formatPlayer(result.lineup.wrs[2])), __jsx(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167\n          },\n          __self: this\n        }, formatPlayer(result.lineup.te)), __jsx(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168\n          },\n          __self: this\n        }, formatPlayer(result.lineup.flex)), __jsx(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169\n          },\n          __self: this\n        }, formatPlayer(result.lineup.dst)))\n      }\n    },\n    golf: {\n      draftkings: {\n        classic: (result, i) => __jsx(\"div\", {\n          key: i,\n          style: lineupStyle,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177\n          },\n          __self: this\n        }, __jsx(\"button\", {\n          onClick: remove(i),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178\n          },\n          __self: this\n        }, \"Remove\"), __jsx(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 179\n          },\n          __self: this\n        }, formatPlayer(result.lineup.g[0])), __jsx(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180\n          },\n          __self: this\n        }, formatPlayer(result.lineup.g[1])), __jsx(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181\n          },\n          __self: this\n        }, formatPlayer(result.lineup.g[2])), __jsx(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182\n          },\n          __self: this\n        }, formatPlayer(result.lineup.g[3])), __jsx(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 183\n          },\n          __self: this\n        }, formatPlayer(result.lineup.g[4])), __jsx(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          },\n          __self: this\n        }, formatPlayer(result.lineup.g[5])))\n      }\n    }\n  };\n  return __jsx(\"div\", {\n    style: componentContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192\n    },\n    __self: this\n  }, __jsx(\"h2\", {\n    style: {\n      marginTop: 0\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193\n    },\n    __self: this\n  }, \"Lineups\"), __jsx(\"div\", {\n    style: cardContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194\n    },\n    __self: this\n  }, __jsx(Card, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195\n    },\n    __self: this\n  }, __jsx(\"h3\", {\n    style: {\n      marginTop: 0\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  }, \"Ownership\"), !!ownership.length && __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  }, ownership.map(data => __jsx(\"div\", {\n    style: ownershipPlayerStyle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202\n    },\n    __self: this\n  }, data.player, \" - \", data.count, \" - \", data.percentage, \"%\")))), __jsx(Card, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211\n    },\n    __self: this\n  }, !!results.length && __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214\n    },\n    __self: this\n  }, __jsx(\"h3\", {\n    style: {\n      marginTop: 0\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215\n    },\n    __self: this\n  }, results.length, \" lineups\"), __jsx(\"button\", {\n    onClick: exportToCSV,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216\n    },\n    __self: this\n  }, \"Export\"), __jsx(\"div\", {\n    style: containerStyle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217\n    },\n    __self: this\n  }, results.map(lineupFormats[sport][site][type]))))));\n};\n\nexport default Lineups;","map":{"version":3,"sources":["/Users/jwesto1/Code/jaw187/dfs-solver/components/lineups.js"],"names":["Card","useSelector","useDispatch","shallowEqual","Solver","OwnershipWatcher","solve","Models","players","getState","dispatch","slates","state","selectedSlate","projection","results","view","removeLineup","i","type","payload","Lineups","length","slate","sport","Sport","toLowerCase","site","GameType","Name","formatPlayer","lineupPlayer","player","find","draftableId","id","position","displayName","salary","headers","nfl","draftkings","classic","golf","exporters","result","lineup","qb","rbs","wrs","te","flex","dst","g","exportToCSV","header","csv","map","join","encodeURI","open","window","remove","containerStyle","display","flexDirection","flexWrap","lineupStyle","padding","margin","backgroundColor","border","fontSize","cardContainer","componentContainer","playerCounts","forEach","ownership","count","percentage","toFixed","ownershipPlayerStyle","whiteSpace","lineupFormats","marginTop","data"],"mappings":"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","sourcesContent":["import Card from './card';\nimport { useSelector, useDispatch, shallowEqual } from \"react-redux\";\nimport Solver from \"../solver/index\";\nimport OwnershipWatcher from '../solver/ownership';\n\nconst { solve, Models, players } = Solver;\n\nconst getState = () => {\n  const dispatch = useDispatch();\n\n  const slates = useSelector(state => state.slates, shallowEqual);\n  const selectedSlate = useSelector(state => state.selectedSlate);\n  const projection = useSelector(state => state.projection);\n  const results = useSelector(state => state.results);\n  const view = useSelector(state => state.view);\n\n  const removeLineup = (i) => {\n    dispatch({\n      type: 'REMOVE_RESULT',\n      payload: i\n    });\n  };\n\n  return {\n    slates,\n    selectedSlate,\n    projection,\n    results,\n    view,\n    removeLineup\n  };\n};\n\nconst Lineups = () => {\n  const {\n    slates,\n    selectedSlate,\n    projection,\n    results,\n    view,\n    removeLineup\n  } = getState();\n\n  if (view !== 'results') {\n    return null;\n  }\n\n  if (results.length === 0) {\n    return (<div>Generate some lineups</div>);\n  }\n\n  const slate = slates && slates[selectedSlate];\n  const sport = slate.Sport.toLowerCase();\n  const site = 'draftkings';\n  const type = slate.GameType.Name.toLowerCase();\n\n  const formatPlayer = (lineupPlayer) => {\n    const player = slate.players.find((player) => player.draftableId == lineupPlayer.id);\n    if (!player) {\n      return lineupPlayer.id;\n    }\n\n    return `${player.position} - ${player.displayName} - $${player.salary}`;\n  };\n\n  const headers = {\n    nfl: {\n      draftkings: {\n        classic: \"QB,RB,RB,WR,WR,WR,TE,FLEX,DST\\n\"\n      }\n    },\n    golf: {\n      draftkings: {\n        classic: \"G,G,G,G,G,G\\n\"\n      }\n    }\n  };\n\n  const exporters = {\n    nfl: {\n      draftkings: {\n        classic: (result) => {\n          const { lineup: { qb, rbs, wrs, te, flex, dst } } = result;\n          return `${qb.id},${rbs[0].id},${rbs[1].id},${wrs[0].id},${wrs[1].id},${wrs[2].id},${te.id},${flex.id},${dst.id}`\n        }\n      }\n    },\n    golf: {\n      draftkings: {\n        classic: (result) => {\n          const { lineup: { g } } =  result;\n          return `${g[0].id},${g[1].id},${g[2].id},${g[3].id},${g[4].id},${g[5].id}`;\n        }\n      }\n    }\n  };\n\n  const exportToCSV = () => {\n    const header = headers[sport][site][type];\n    const csv = \"data:text/csv;charset=utf-8,\" + header + results.map(exporters[sport][site][type]).join('\\n');\n    const { encodeURI, open } = window;\n    open(encodeURI(csv));\n  };\n\n  const remove = (i) => {\n    return () => removeLineup(i);\n  };\n\n  const containerStyle = {\n    display: 'flex',\n    flexDirection: 'row',\n    flexWrap: 'wrap'\n  };\n\n  const lineupStyle = {\n    padding: 16,\n    margin: 8,\n    backgroundColor: \"#f3f3f3\",\n    border: '1px solid #DDD',\n    fontSize: 12\n  }\n\n  const cardContainer = {\n    display: 'flex',\n    flexDirection: 'row'\n  }\n\n  const componentContainer = {\n    padding: 16\n  };\n\n  const playerCounts = {};\n  results.forEach((result) => {\n    result.players.forEach((player) => {\n      if (!playerCounts[player]) {\n        playerCounts[player] = 0;\n      }\n\n      ++playerCounts[player];\n    });\n  });\n\n  const ownership = Object.keys(playerCounts).map((player) => {\n    return {\n      player: formatPlayer({ id: player }),\n      count: playerCounts[player],\n      percentage: ((playerCounts[player] / results.length) * 100).toFixed(0)\n    }\n  });\n\n  const ownershipPlayerStyle = {\n    whiteSpace: 'nowrap'\n  }\n\n  const lineupFormats = {\n    nfl: {\n      draftkings: {\n        classic: (result, i) => (\n          <div key={i} style={lineupStyle}>\n            <button onClick={remove(i)}>Remove</button>\n            <div>{formatPlayer(result.lineup.qb)}</div>\n            <div>{formatPlayer(result.lineup.rbs[0])}</div>\n            <div>{formatPlayer(result.lineup.rbs[1])}</div>\n            <div>{formatPlayer(result.lineup.wrs[0])}</div>\n            <div>{formatPlayer(result.lineup.wrs[1])}</div>\n            <div>{formatPlayer(result.lineup.wrs[2])}</div>\n            <div>{formatPlayer(result.lineup.te)}</div>\n            <div>{formatPlayer(result.lineup.flex)}</div>\n            <div>{formatPlayer(result.lineup.dst)}</div>\n          </div>\n        )\n      }\n    },\n    golf: {\n      draftkings: {\n        classic: (result, i) => (\n          <div key={i} style={lineupStyle}>\n            <button onClick={remove(i)}>Remove</button>\n            <div>{formatPlayer(result.lineup.g[0])}</div>\n            <div>{formatPlayer(result.lineup.g[1])}</div>\n            <div>{formatPlayer(result.lineup.g[2])}</div>\n            <div>{formatPlayer(result.lineup.g[3])}</div>\n            <div>{formatPlayer(result.lineup.g[4])}</div>\n            <div>{formatPlayer(result.lineup.g[5])}</div>\n          </div>\n        )\n      }\n    }\n  };\n\n  return (\n    <div style={componentContainer}>\n      <h2 style={{ marginTop: 0 }}>Lineups</h2>\n      <div style={cardContainer}>\n        <Card>\n          <h3 style={{ marginTop: 0 }}>Ownership</h3>\n          {\n            !!ownership.length && (\n              <div>\n                {\n                  ownership.map((data) => (\n                    <div style={ownershipPlayerStyle}>\n                      {data.player} - {data.count} - {data.percentage}%\n                    </div>\n                  ))\n                }\n              </div>\n            )\n          }\n        </Card>\n        <Card>\n          {\n            !!results.length && (\n              <div>\n                <h3 style={{marginTop: 0 }}>{results.length} lineups</h3>\n                <button onClick={exportToCSV}>Export</button>\n                <div style={containerStyle}>\n                  {\n                    results.map(lineupFormats[sport][site][type])\n                  }\n                </div>\n              </div>\n            )\n          }\n        </Card>\n      </div>\n    </div>\n  );\n};\n\nexport default Lineups;\n"]},"metadata":{},"sourceType":"module"}